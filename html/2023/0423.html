<!DOCTYPE html>
<html lang="ja">
<head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-W9H7QJT6XG"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-W9H7QJT6XG');
</script>
<!-- SNS Card -->
<meta property="og:type" content="article" />
<meta property="og:site_name" content="加藤祐介ブログ / Yusuke Kato Blog" />
<meta property="og:image" content="https://yusukekato.jp/images/summary.jpg" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:site" content="@yusukekato_main" />
<meta name="twitter:image" content="https://yusukekato.jp/images/summary_large_image.png" />
<!-- 変更 -->
<meta name="twitter:title" content="第64回シェル芸勉強会メモ / Yusuke Kato Blog" />
<meta property="og:url" content="https://yusukekato.jp/../html/2023/0423.html" />
<meta property="og:title" content="第64回シェル芸勉強会メモ / Yusuke Kato Blog" />
<meta property="og:description" content="023年4月23日に開催された第64回シェル芸勉強会にオンラインで参加しました。そのときの記録をメモとして記事にしておこうと思います。ChatGPTの回答もあります。" />
<meta name="twitter:description" content="023年4月23日に開催された第64回シェル芸勉強会にオンラインで参加しました。そのときの記録をメモとして記事にしておこうと思います。ChatGPTの回答もあります。" />
<title>第64回シェル芸勉強会メモ / Yusuke Kato Blog</title>
<meta name="description" content="023年4月23日に開催された第64回シェル芸勉強会にオンラインで参加しました。そのときの記録をメモとして記事にしておこうと思います。ChatGPTの回答もあります。" />
<!-- main -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="icon" href="https://yusukekato.jp/images/favicon.png">
<link rel="stylesheet" href="https://yusukekato.jp/css/style.css?version=51">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@100..900&display=swap" rel="stylesheet">
</head>
<body>
<h1 id="top" class="heading-028" data-label="YUSUKE KATO BLOG">加藤祐介ブログ</h1>

<div class="alldiv">
<ul class="nav-list">
<li class="nav-list-item">
<a href="https://yusukekato.jp/" class="bButton">HOME</a>
</li>
<li class="nav-list-item">
<a href="https://yusukekato.jp/html/about.html" class="bButton">ABOUT</a>
</li>
<li class="nav-list-item">
<a href="https://yusukekato.jp/html/form.html" class="bButton">CONTACT</a>
</li>
</ul>
<h1>第64回シェル芸勉強会メモ</h1>
<p>記事投稿日: 2023年4月23日（日）</p>
<p>最終更新日: 2024年3月30日（土）</p>

<h2 id="index">目次</h2>
<ul>
<li><a href="#0">はじめに</a></li>
<li><a href="#1">公式配信</a></li>
<li><a href="#2">問1 : メール解析</a></li>
<li><a href="#3">問2 : 乱数生成</a></li>
<li><a href="#4">問3 : 行列の転置</a></li>
<li><a href="#5">問4 : k-means法</a></li>
<li><a href="#6">問5 : オイラーのφ関数</a></li>
<li><a href="#7">問6 : 互いに素な自然数の列挙</a></li>
<li><a href="#8">おわりに</a></li>
<li><a href="#news">お知らせ</a></li>
<li><a href="#series">シリーズ記事一覧</a></li>
</ul>

<h2 id="0">はじめに</h2>
<p>2023年4月22日に開催された第64回シェル芸勉強会にオンラインで参加しました。
そのときの記録をメモとして記事にしておこうと思います。
あと、解けそうな問題はChatGPT（GPT-4）にも解いていただこうと思います。
</p>
<h2 id="1">公式配信</h2>
<div class="iframeClass">
<iframe width="560" height="315" src="https://www.youtube.com/embed/zEmqu1UP3SY" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe></div>
<h2 id="2">問1 : メール解析</h2>
<h3>問題内容</h3>
<p>メールの内容から必要な情報だけ抜き出します。
</p>
<h3>私の回答</h3>
<div class="codeClass"><pre><code>cat S*/*64/*.txt|sed 's/-/ /g'|sed 's/:/ /g'|sed 's/:&gt;//g'|sed 's/Re //g'|sort -k9|awk '{c[NR]=$3;d[NR]=$4;g[NR]=$7;h[NR]=$8;i[NR]=$9}END{for(j=1;j&lt;length(i);j++){if(i[j]==i[j-1]){printf("%s %s %s %d\n",i[j],g[j-1]"-&gt;"h[j-1],g[j]"-&gt;"h[j],(c[j]-c[j-1])*24+d[j]-d[j-1])}}}'
</code></pre></div>
<h3>私の感想</h3>
<p>awkでごり押ししました。
まずsedでメール内容を整形して、時刻を比較したいメール同士が並ぶようにsortで並べ替えを行います。
それからawkでメール内容をすべて配列に入れて、時刻の差分を計算して必要な情報だけ出力しました。
ちなみに、私の回答は不完全なので分と秒を考慮できていません。
まだまだ勉強が足りていない気がしますね。
精進します。
</p>
<h2 id="3">問2 : 乱数生成</h2>
<h3>問題内容</h3>
<p>正規分布に従う乱数を生成します。
</p>
<h3>私の回答</h3>
<div class="codeClass"><pre><code>echo | awk 'BEGIN{srand();a=0}{for(i=0;i&lt;12;i++)a+=rand()}END{printf("%lf\n",a-6)}'
</code></pre></div>
<h3>私の感想</h3>
<p>私は正規分布が分からないので0～1の乱数を12個足して6を引いた値を出力しました。
解説で紹介されていた「cat /dev/urandom」から乱数を生成する方法が勉強になりました。
これから乱数を生成するときは使ってみようと思います。
数値だけではなくアルファベットの文字列もランダムに生成できるとのこと。
便利ですね。ありがとうございます。
</p>
<h3>ChatGPT（GPT-4）の回答</h3>
<div class="codeClass"><pre><code>awk 'BEGIN {srand(); u1=rand(); u2=rand(); z0=sqrt(-2*log(u1))*cos(2*3.14159265359*u2); print z0}'
</code></pre></div>
<p>Box-Muller変換を使っているらしいです。
</p>
<h2 id="4">問3 : 行列の転置</h2>
<h3>問題内容</h3>
<p>与えられた行列が対称行列か判定します。
</p>
<h3>私の回答</h3>
<div class="codeClass"><pre><code>cat S*/*64/mat | python3 -c 'import numpy as np;A=[input().split() for _ in range(5)];A=np.array(A);AT=A.T;r="YES" if np.array_equal(A,AT) else "NO";print(r)'
</code></pre></div>
<h3>私の感想</h3>
<p>awkで行列を扱うのは地獄になりそうだったのでPythonのNumpyを使って解きました。
解説ではdatamashコマンドが紹介されていて勉強になりました。
まだまだ知らないコマンドがたくさんありますね。
便利なコマンドは少しずつ覚えておきたい所存です。
また、二次元配列の入力に関しては以下の記事を参考にさせていただきました。
</p>
<a href="https://qiita.com/naz_/items/9eed47f5483679fa66b1" class="aButton">参考 : 競技プログラミングをPython3で解く</a>
<h3>ChatGPT（GPT-4）の回答</h3>
<div class="codeClass"><pre><code>cat S*/*64/mat | awk '{for(j=1;j&lt;=5;j++)m[NR,j]=$j}END{sym=1;for(i=1;i&lt;=5;i++){for(j=1;j&lt;=5;j++){if(m[i,j]!=m[j,i]){sym=0;break}}if(!sym)break}print sym?"Symmetric":"Not symmetric"}'
</code></pre></div>
<p>awkで解いていただきました。
</p>
<h2 id="5">問4 : k-means法</h2>
<h3>問題内容</h3>
<p>k-means法をシェル芸で実装してみます。
</p>
<h3>私の回答（小問1）</h3>
<div class="codeClass"><pre><code>cat S*/*64/nums.0 | sort -k2 | awk '{a[$2]+=$1;b[$2]+=1}END{for(i=0;i&lt;length(a);i++)printf("%d %lf\n",i,a[i]/b[i])}' &gt; mean.1
</code></pre></div>
<h3>私の感想（小問1）</h3>
<p>awkが便利すぎますね。
ファイルの中身をsortを使ってクラスターごとに並べ替えます。
それからawkでクラスターごとの合計を配列に入れて最後に平均をとっています。
一次元配列で済む問題ならawkで十分戦える気がします。
もっとawkを勉強していきたい気持ちです。
勉強になりました。
</p>
<p>小問2はワンライナーではしんどくなったので解説を見てなるほどなぁ～と感心していました。
あとChatGPTにBashのワンライナーでk-means法の実装をお願いしたところ、
「PythonやRを使ってください」と怒られてしまいました。すみません。
</p>
<h2 id="6">問5 : オイラーのφ関数</h2>
<h3>問題内容</h3>
<p>オイラーのφ関数をBashのワンライナーで実装します。
</p>
<h3>私の回答</h3>
<div class="codeClass"><pre><code>n=8;echo $n | factor | sed 's/.*://g;s/ /\n/g' | uniq | awk -F, -v N=$n 'BEGIN{a=N}NR1&gt;{a*=(1-1/$1)}END{printf("%lf\n",a)}'
</code></pre></div>
<h3>私の感想</h3>
<p>オイラーのφ関数というものを初めて知りました。
awkにBash側の変数が渡せなくて困っていましたが、Fオプション付けたらなんとかなりました。
以下の記事を参考にさせていただきました。
ありがとうございます。
こんなに単純な関数なのに互いに素な自然数の個数が出てくるのは不思議ですね。
数学の神秘を体感しました。
勉強になりました。
楽しかったです。
</p>
<a href="https://ksomemo.github.io/contents/qiita/awk%E3%81%AE%E4%B8%AD%E3%81%A7%E3%82%B7%E3%82%A7%E3%83%AB%E3%81%A7%E4%BD%9C%E6%88%90%E3%81%97%E3%81%9F%E5%A4%89%E6%95%B0%E3%82%92%E6%89%B1%E3%81%86.html" class="aButton">参考 : awkの中でシェルで作成した変数を扱う</a>
<h3>ChatGPT（GPT-4）の回答</h3>
<div class="codeClass"><pre><code>n=8; phi_n=0; gcd () { [ $2 -eq 0 ] && echo $1 || gcd $2 $(($1 % $2)); }; for ((i=1; i&lt;=n; i++)); do if [[ $(gcd $i $n) == 1 ]]; then ((phi_n++)); fi; done; echo $phi_n
</code></pre></div>
<p>gcd関数から実装していただけました。
</p>
<h2 id="7">問6 : 互いに素な自然数の列挙</h2>
<h3>問題内容</h3>
<p>「seq 100 |」から始めて、各行の数字に対して、互いに素な自然数を列挙します。
</p>
<h3>私の回答</h3>
<div class="codeClass"><pre><code>seq 100 | awk 'function gcd(a,b){while(b!=0){r=a%b;a=b;b=r}return a}{printf("%d : ",$1);for(i=1;i&lt;=$1;i++){if(gcd(i,$1)== "1"){printf("%d ",i)}};printf("\n")}'
</code></pre></div>
<h3>私の感想</h3>
<p>gcd関数（最大公約数を求める関数）はChatGPTに実装していただきました。
互いに素な自然数がまだあまり理解できていませんが、
とりあえず解けたので良しとしましょう。
それにしてもChatGPTは便利ですね。
ある程度の無理を言っても許してくれる懐の深さも備えています。
最大公約数が1なら互いに素であると言えるということだけは理解できました（おそらく）。
勉強になりました。ありがとうございます。
</p>
<h2 id="8">おわりに</h2>
<p>第64回シェル芸勉強会についてメモを書きました。
シェル芸の得手不得手が少し理解できた気がします。
また、今まで知らなかったコマンドにも出会えたので良かったです。
ChatGPTにもご協力いただいてとても勉強になりました。
次回も参加させていただきたいと思います。
一度くらいは現地参加もしてみたいですね。
ということで、誠にありがとうございました。
またよろしくお願いいたします。
次回も楽しみにしています。
</p>
<h2 id="news">お知らせ</h2>
<ul>
<li>2024/08/01: <a href="https://yusukekato.jp/html/2024/0801.html">れもんが我が家に来て一ヶ月</a></li>
<li>2024/06/29: <a href="https://yusukekato.jp/html/2024/0630.html">セキセイインコ「れもん」我が家へ</a></li>
<li>2024/05/03: <a href="https://shellgei-online-judge.com/">シェル芸オンラインジャッジ一周年</a></li>
</ul>
<div class="slide">
<img src="https://yusukekato.jp/images/news/news_20240804.jpg" class="slide-img">
<img src="https://yusukekato.jp/images/news/news_20240629.jpg" class="slide-img">
<img src="https://yusukekato.jp/images/news/news_20240503.jpg" class="slide-img">
</div>
<details>
<summary>過去のお知らせ</summary>
<ul>
<li>2023/05/03: <a href="https://shellgei-online-judge.com/">シェル芸オンラインジャッジ開始</a></li>
<li>2023/04/08: <a href="https://yusukekato.jp/">加藤祐介ブログ開始</a></li>
</ul>
</details>

<h2 id="series">シリーズ記事一覧</h2>
<p>各シリーズの記事を下記にまとめてあります。</p>
<details>
<summary>セキセイインコ「れもん」の日記</summary>
</details>

<details>
<summary>AlpacaHackで始めるCTF入門</summary>
</details>

<details>
<summary>シェル芸</summary>
</details>

<details>
<summary>ROS 2</summary>
</details>

<details>
<summary>料理日記</summary>
</details>

<details>
<summary>その他</summary>
</details>

<footer>
<hr class="BlackLine">
<a href="https://yusukekato.jp/html/form.html" class="aButton">お問い合わせフォームへ</a>
<a href="#top" class="aButton">ページトップへ</a>
<a href="https://yusukekato.jp/" class="aButton">ホームへ戻る</a>
<div class="img">
<img src="https://yusukekato.jp/images/BlueTreeIcon.jpg">
</div>
<ul class="nav-list">
<li class="nav-list-item">
<a href="https://yusukekato.jp/" class="bButton">HOME</a>
</li>
<li class="nav-list-item">
<a href="https://yusukekato.jp/html/about.html" class="bButton">ABOUT</a>
</li>
<li class="nav-list-item">
<a href="https://yusukekato.jp/html/form.html" class="bButton">CONTACT</a>
</li>
</ul>
</footer>
</div> <!-- alldiv -->
<h1 id="bottom" class="heading-028-2" data-label="" xmlns:cc="http://creativecommons.org/ns#" xmlns:dct="http://purl.org/dc/terms/">
加藤祐介ブログの著作物はCC BY-NC-ND 4.0で公開されています。<br>
加藤祐介ブログのソフトウェアはMITライセンスで公開されています。<br>
&copy; 2023 YusukeKato All Rights Reserved.<br><br>
<img style="height:22px!important;margin-left:2px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/cc.svg?ref=chooser-v1" alt=""><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/by.svg?ref=chooser-v1" alt=""><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/nc.svg?ref=chooser-v1" alt=""><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/nd.svg?ref=chooser-v1" alt=""><br>
</h1>
</body>
</html>
